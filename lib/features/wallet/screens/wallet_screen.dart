import 'package:flutter/material.dart';import 'package:flutter_bloc/flutter_bloc.dart';import 'package:samoilenko_maps_app/features/theme/theme.dart';import '../bloc/wallet_cubit.dart';import '../widgets/wallet_appbar.dart';import '../widgets/wallet_balance_card.dart';class WalletScreen extends StatefulWidget {  const WalletScreen({super.key});  @override  State<WalletScreen> createState() => _WalletScreenState();}class _WalletScreenState extends State<WalletScreen> {  ScrollController? _scrollController;  @override  Widget build(BuildContext context) {    return BlocProvider<WalletCubit>(      create: (_) => WalletCubit(        walletRepository: RepositoryProvider.of(context),      )..fetchWallet(),      child: BlocBuilder<WalletCubit, WalletState>(        builder: (context, state) {          return SafeArea(            child: Scaffold(              backgroundColor: white,              body: state.when(                initial: () => const Center(child: CircularProgressIndicator()),                loading: () => const Center(child: CircularProgressIndicator()),                error: (String errorMsg) => Center(child: Text(errorMsg)),                loaded: (walletInfo) {                  return CustomScrollView(                    controller: _scrollController,                    slivers: [                      SliverPersistentHeader(                        pinned: true,                        delegate: WalletAppBar(                            minHeight: 100,                            maxHeight: 243,                            ballance: walletInfo.balance ?? 0.0,),                      ),                      SliverPadding(                        padding: EdgeInsets.zero,                        sliver: SliverList(                          delegate: SliverChildBuilderDelegate(                              (BuildContext context, int index) {                            return WalletBalanceCard(                              walletInfo: walletInfo,                              itemIndex: index,                            );                          }, childCount: walletInfo.history?.length,),                        ),                      ),                    ],                  );                },              ),            ),          );        },      ),    );  }}