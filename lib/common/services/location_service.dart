import 'dart:math';import 'package:geolocator/geolocator.dart';import 'logger.dart';/// Determine the current position of the device.class GeolocationService {  Point<double>? currentLocation;  bool _serviceEnabled = false;  LocationPermission? permissionGranted;  Future<bool> hasGeoLocation() async {    _serviceEnabled = await Geolocator.isLocationServiceEnabled();    return permissionGranted == LocationPermission.whileInUse && _serviceEnabled;  }  Future<bool> checkAndRequestLocationAccess() async {    _serviceEnabled = await Geolocator.isLocationServiceEnabled();    if (!_serviceEnabled) {      _serviceEnabled = await Geolocator.openLocationSettings();      if (!_serviceEnabled) {        return false;      }    }    permissionGranted = await Geolocator.checkPermission();    if (permissionGranted == LocationPermission.denied || permissionGranted == LocationPermission.deniedForever) {      permissionGranted = await Geolocator.requestPermission();      if (permissionGranted != LocationPermission.whileInUse && permissionGranted != LocationPermission.always) {        return false;      }    }    try {      await Geolocator.getCurrentPosition();    } catch (e) {      log.fine(e.toString());      return false;    }    return true;  }  Future<void> loadCurrentLocation() async {    try {      final locationData = await Geolocator.getCurrentPosition();      currentLocation = Point<double>(locationData.latitude, locationData.longitude);    } catch (e) {      log.fine(e.toString());    }  }}